<!DOCTYPE html>
<html lang=en>
<head>

<title>Router</title>

<template id=T_HOME	><h1>HOME PAGE		</h1></template>
<template id=T_404	><h1>Page Not found	</h1></template>

</head>

<body>

<button	id=HOME_B	>Home			</button>
<button	id=IMAGE_B	>Image			</button>
<button	id=IFRAME_B	>IFrame			</button>
<button	id=WC_B		>WebComponents	</button>

<main id=MAIN></main>



<script type=module>

import	JPTable from './jp-table.js'

const
Hash		= () => decodeURIComponent( location.hash.slice( 1 ) )

const
C			= $ => document.createElement( $ )
const
E			= $ => document.getElementById( $ )
const
AC			= $ => E( 'MAIN' ).appendChild( $ )
const
Clone		= $ => AC( E( $ ).content.cloneNode( true ) )
const
HashedSrc	= $ => AC( C( $ ) ).setAttribute( 'src', Hash() )

const
Route = () => {

console.log( location.pathname, location.search, Hash() )

	E( 'MAIN' ).innerHTML = ''

	switch ( location.pathname ) {
	case '/'		: Clone		( 'T_HOME'				); break
	case '/image'	: HashedSrc	( 'img'					); break
	case '/iframe'	: HashedSrc	( 'iframe'				); break
	case '/wc'		: 
		{	const $ = new JPTable()
			$.setAttribute( 'json', Hash() )
			AC( $ )
		}
		break
	default			: Clone		( 'T_404'				); break
	}
}

window.addEventListener( 'popstate', Route )

Route()

const
Navigate = $ => (
	history.pushState( { $ }, null, $ )
,	Route()
)
E( 'HOME_B'		).onclick = () => Navigate( '/' )
E( 'IMAGE_B'	).onclick = () => Navigate( '/image#https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Jordens_inre.jpg/230px-Jordens_inre.jpg' )
E( 'IFRAME_B'	).onclick = () => Navigate( '/iframe#/sub.html?A=B'	)
E( 'WC_B'		).onclick = () => Navigate( '/wc#{"head":["date","name","grade","winner"],"body":[[20181125,"Japan Cup","G1","Almond Eye"],[20181125,"Keihan Hai","G3","Danon Smash"],[20190120,"Tokai S.","G2","Inti"],[20190120,"American Jockey Club Cup","G2","Sciacchetra"]]}'	)

</script>
</body>
</html>
